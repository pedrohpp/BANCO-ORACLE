
*/ aula 3 prog. banc.

- foreing key pode ser primary key.

chave estrangeira e chave primaria pode ser a mesma coisa

o n identifica quem receber ao campo de outra classe.

toda entidade n - n vai como primary key numa entidade fraca



nao permite deletar dados vinculador por foreing key


/*
------------------------
DROP TABLE MATRICULA;
DROP TABLE CURSO_ALU;
DROP TABLE DISCIPLINA;
DROP TABLE PROFESSOR;
DROP TABLE CURSO;
DROP TABLE ESPECIALIDADE;

CREATE TABLE ESPECIALIDADE(
	ID_ESP(2) PRIMARY KEY, //<-- SE SÓ TEM UMA PRIMARY KEY, DEFINA ISSO DE COMEÇO
	NOME VARCHAR2(120) NOT NULL //<-- DEFINA QUE NÃO SERA NULO DE INICIO.
	CONSTRAINT UQ_NOME_ESP UNIQUE(NOME) <-- O NOME DESTA É UNICO DEFINA ISSO

);

CREATE TABLE CURSO(
	COD_CUR(3) PRIMARY KEY, //<-- SE SÓ TEM UMA PRIMARY KEY, DEFINA ISSO DE COMEÇO
	NOME_CUR VARCHAR2(120) NOT NULL //<-- DEFINA QUE NÃO SERA NULO DE INICIO.
	CONSTRAINT UQ_NOME_CUR UNIQUE(NOME)

);

CREATE TABLE ALUNO(
	RA NUMBER(10) PRIMARY KEY, --SE SÓ TEM UMA PRIMARY KEY, DEFINA ISSO DE COMEÇO
	NOME VARCHAR2(120) NOT NULL --DEFINA QUE NÃO SERA NULO DE INICIO.
);
CREATE TABLE PROFESSOR(
	COD_PROF NUMBER(4) PRIMARY KEY, --SE SÓ TEM UMA PRIMARY KEY, DEFINA ISSO DE COMEÇO
	NOME VARCHAR2(120) NOT NULL --DEFINA QUE NÃO SERA NULO DE INICIO.
	ID_ESP NUMBER (2)
	CONSTRAINT FK_PROF FOREIGN KEY(ID _ESP)
		REFERENCES ESPECIALIDADE(ID_ESP)
	
);
CREATE TABLE DISCIPLINA(
	COD_DISC NUMBER(4) PRIMARY KEY, --SE SÓ TEM UMA PRIMARY KEY, DEFINA ISSO DE COMEÇO
	NOME VARCHAR2(120) NOT NULL, --DEFINA QUE NÃO SERA NULO DE INICIO.
	COD_PROF NUMBER (4) NULL,--USAR NULL É OPCIONAL
	
	CONSTRAINT UQ_NOME_DISC UNIQUE(COD_PROF)//
	CONSTRAINT FK_DISC_PROF FOREIGN KEY (COD_PROF)
		REFERENCES PROFESSOR(COD_PROF)
);
CREATE TABLE MATRICULA(
	RA NUMBER(10),	PRIMARY KEY, --SE SÓ TEM UMA PRIMARY KEY, DEFINA ISSO DE COMEÇO
	COD_DISC NUMBER(4),
	ANO_SEMESTRE CHAR(6)
	MEDIA NUMBER(4,2),
	FREQ(5,2),
		CONSTRAINT PK_MATRIC PRIMARY KEY (RA, COD_PROF, COD_DISC, ANOSEM),
	CONSTRAINT FK_MAT_ALU FOREIGN KEY(RA) REFERENCES ALUNO(RA),
	CONSTRAINT FK_MAT_PROF FOREIGN KEY(COD_PROF),
		REFERENCES PROFESSOR(COD_PROF)
	CONSTRAINT FK_MAT_DISC FOREIGN KEY(COD_DISC),
		REFERENCES DISCIPLINA(COD_DISC)
);
CREATE TABLE CURSO_ALUNO(
	RA NUMBER(10),
	COD_CUR NUMBER(3),
	DATAINICIO DATE NOT NULL
	DATAFIM DATE,
	STATUS CHAR(1)NOT NULL,
	CONSTRAINT PK_CURALU PRIMARY KEY(RA,COD_CUR),
	CONSTRAINT CK_STATUS_CURALU
		CHECK(STATUS IN ('C', 'F', 'T')),
	CONSTRAINT FK_CURALU_ALU FOREIGN KEY(RA) 
		REFERENCES ALUNO(RA),
	CONSTRAINT FK_CURALU_CUR FOREIGN KEY(COD_CUR) 
		REFERENCES CURSO(COD_CUR),
);
